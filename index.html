<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>10문항 무료 MBTI 테스트 | 나와 딱 맞는 K-Demon 바로 보기</title>
  <meta name="description" content="10문항으로 빠르게 MBTI 스타일 유형을 계산하고 K-Demon 결과 페이지로 이동합니다.">
  <meta property="og:title" content="10문항 MBTI 간이검사">
  <meta property="og:description" content="빠르게 유형을 계산하고 K-Demon으로 이동하기">
  <meta property="og:type" content="website">
  <style>
    :root { --bg:#0b1020; --panel:#121933; --accent:#6ee7ff; --accent-2:#a78bfa; --text:#e8eefc; --muted:#a8b0c9; --danger:#ff6b6b; --ok:#22c55e; --radius:16px; }
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Apple SD Gothic Neo,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:linear-gradient(180deg,#0b1020 0%,#0e1430 100%);color:var(--text);line-height:1.6}
    .wrap{max-width:880px;margin:24px auto;padding:20px}
    .card{background:radial-gradient(1200px 600px at 100% -20%,rgba(167,139,250,.08),transparent 60%),radial-gradient(1200px 600px at 0% 120%,rgba(110,231,255,.08),transparent 60%),var(--panel);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
    header{padding:28px 24px 16px;border-bottom:1px solid rgba(255,255,255,.06)}
    header h1{margin:0 0 8px;font-size:clamp(20px,3vw,28px)}
    header p{margin:0;color:var(--muted)}
    .content{padding:20px}
    .progress{position:sticky;top:0;z-index:2;background:rgba(11,16,32,.75);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06);padding:10px 20px;display:flex;align-items:center;gap:12px}
    .bar-wrap{flex:1;background:rgba(255,255,255,.08);height:10px;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .25s ease}
    .bar-label{font-size:14px;color:var(--muted);min-width:70px;text-align:right}
    form{display:grid;gap:16px}
    fieldset{border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    legend{padding:0 8px;color:var(--accent);font-weight:700}
    .q{display:grid;gap:10px}
    .opt{display:grid;grid-template-columns:1fr auto;align-items:center;gap:12px;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.02)}
    .opt input[type="radio"]{width:18px;height:18px;accent-color:var(--accent)}
    .btns{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-top:6px}
    .left{display:flex;gap:10px}
    button,.btn{border:none;cursor:pointer;font-weight:700;letter-spacing:.2px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#0b1020;padding:12px 16px;border-radius:12px;box-shadow:0 6px 18px rgba(110,231,255,.2)}
    .btn.secondary{background:rgba(255,255,255,.1);color:var(--text);box-shadow:none}
    .muted{color:var(--muted);font-size:14px}
    .error{color:var(--danger);font-weight:700}
    .result{margin-top:8px;padding:16px;border:1px dashed rgba(255,255,255,.2);border-radius:12px}
    .type{font-size:28px;font-weight:900;letter-spacing:2px}
    .hidden{display:none!important}
    footer{padding:14px 20px 22px;color:var(--muted);font-size:13px;border-top:1px solid rgba(255,255,255,.06)}
    a{color:var(--accent);text-decoration:none}
    /* 모바일에서만 버튼 텍스트 줄바꿈 표시 */
    .br-sm { display: none; }

    @media (max-width: 480px) {
      .br-sm { display: inline; }

      /* 버튼 두 개는 가로로 유지, 안내 문구는 다음 줄로 내려보내기 */
      .btns { flex-wrap: wrap; gap: 8px; }
      .btns .muted { flex-basis: 100%; order: 2; margin-top: 4px; }

      /* 버튼이 좁은 폭에서도 예쁘게 보이도록 패딩/줄간격 조정 */
      .left { gap: 8px; }
      button, .btn { padding: 10px 12px; line-height: 1.15; text-align: center; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" aria-label="MBTI 간이검사">
      <header>
        <h1>10문항 무료 MBTI 테스트 | 나와 딱 맞는 K-Demon 바로 보기</h1>
        <p>※ 오락·콘텐츠용 간이 테스트입니다. 공식 심리검사가 아닙니다. 개인정보는 수집하지 않습니다.</p>
      </header>

      <div class="progress">
        <div class="bar-wrap">
          <div class="bar" id="bar" role="progressbar" aria-label="응답 진행도" aria-valuemin="0" aria-valuemax="10" aria-valuenow="0"></div>
        </div>
        <div class="bar-label" id="barLabel">0 / 10</div>
      </div>

      <div class="content">
        <form id="quiz" novalidate></form>

        <div class="btns">
          <div class="left">
            <button id="submitBtn" type="button" aria-label="결과 보기">
              결과<span class="br-sm"><br></span>보기
            </button>

            <button id="resetBtn" type="button" class="btn secondary" aria-label="다시 하기">
              다시<span class="br-sm"><br></span>하기
            </button>
          </div>
          <span class="muted">10문항 모두 응답하면 자동으로 결과 페이지로 이동합니다.</span>
        </div>

        <div id="msg" class="error" role="status" style="margin-top:10px"></div>

        <div id="result" class="result hidden" aria-live="polite">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
            <div>
              <div class="muted">당신의 유형</div>
              <div class="type" id="typeText">—</div>
            </div>
            <a id="goLink" class="btn" href="#" rel="noopener">K-Demon에서 결과 보기</a>
          </div>
        </div>
      </div>

      <footer>© <span id="year"></span> MBTI Quick Test (Fan-made). GitHub Pages로 호스팅됩니다.</footer>
    </div>
  </div>

  <script>
    // ===== 설정 =====
    const KD_BASE = "./results/?type=";  // 결과 페이지로 이동
    const OPEN_IN_NEW_TAB = false;       // 같은 탭
    const AUTO_REDIRECT  = true;         // 계산 즉시 이동(원하면 false)
    const TIE_BREAK = { EI:'I', SN:'N', TF:'F', JP:'P' };

    // 문항
    const QUESTIONS = [
      { id:'q1',  axis:'EI', a:{ label:'사람 많은 자리에서 에너지가 충전된다', letter:'E' }, b:{ label:'혼자 있을 때 에너지가 회복된다', letter:'I' } },
      { id:'q2',  axis:'SN', a:{ label:'사실과 디테일이 먼저 보인다',       letter:'S' }, b:{ label:'가능성과 아이디어가 먼저 떠오른다',   letter:'N' } },
      { id:'q3',  axis:'TF', a:{ label:'결정은 논리와 원칙이 우선',           letter:'T' }, b:{ label:'결정은 사람과 영향이 우선',         letter:'F' } },
      { id:'q4',  axis:'JP', a:{ label:'계획표가 있어야 편하다',               letter:'J' }, b:{ label:'상황에 맞춰 유연하게 움직인다',       letter:'P' } },
      { id:'q5',  axis:'EI', a:{ label:'새로운 사람과 쉽게 대화 시작',         letter:'E' }, b:{ label:'익숙한 사람과 깊게 대화',           letter:'I' } },
      { id:'q6',  axis:'SN', a:{ label:'검증된 방법을 선호',                   letter:'S' }, b:{ label:'새 시도를 즐김',                   letter:'N' } },
      { id:'q7',  axis:'TF', a:{ label:'피드백은 직설적일수록 좋다',           letter:'T' }, b:{ label:'피드백은 배려가 중요하다',         letter:'F' } },
      { id:'q8',  axis:'JP', a:{ label:'마감 전 미리 끝내는 편',               letter:'J' }, b:{ label:'마감 직전에 집중이 잘 됨',         letter:'P' } },
      { id:'q9',  axis:'SN', a:{ label:'현재 일에 몰두하는 편',               letter:'S' }, b:{ label:'미래의 그림을 자주 그린다',         letter:'N' } },
      { id:'q10', axis:'EI', a:{ label:'말하며 생각이 정리된다',               letter:'E' }, b:{ label:'글/머릿속에서 정리 후 말한다',       letter:'I' } },
    ];

    // ===== DOM =====
    const formEl = document.getElementById('quiz');
    const barEl = document.getElementById('bar');
    const barLabelEl = document.getElementById('barLabel');
    const msgEl = document.getElementById('msg');
    const resEl = document.getElementById('result');
    const typeTextEl = document.getElementById('typeText');
    const goLinkEl = document.getElementById('goLink');
    document.getElementById('year').textContent = new Date().getFullYear();

    // 성능 개선: 응답 캐시(Map)
    const answers = new Map();

    function buildQuestions(){
      QUESTIONS.forEach((q, idx) => {
        const fs = document.createElement('fieldset');
        const lg = document.createElement('legend'); lg.textContent = `Q${idx+1}`; fs.appendChild(lg);
        const wrap = document.createElement('div'); wrap.className = 'q';
        wrap.appendChild(buildOption(q,'a'));
        wrap.appendChild(buildOption(q,'b'));
        fs.appendChild(wrap);
        formEl.appendChild(fs);
      });
    }
    function buildOption(q, key){
      const data = q[key]; const id = `${q.id}-${key}`;
      const label = document.createElement('label'); label.className='opt'; label.setAttribute('for', id);
      const span = document.createElement('span'); span.textContent = data.label;
      const input = document.createElement('input'); input.type='radio'; input.name=q.id; input.value=data.letter; input.id=id; input.required=true;
      input.addEventListener('change', () => { answers.set(q.id, data.letter); updateProgress(); });
      label.appendChild(span); label.appendChild(input); return label;
    }

    buildQuestions(); updateProgress();

    function answeredCount(){ return answers.size; }
    function firstUnanswered(){ return QUESTIONS.find(q => !answers.has(q.id)); }

    function updateProgress(){
      const cnt = answeredCount(); const pct = Math.round((cnt/QUESTIONS.length)*100);
      barEl.style.width = pct + '%';
      barEl.setAttribute('aria-valuenow', String(cnt));
      barLabelEl.textContent = `${cnt} / ${QUESTIONS.length}`;
      msgEl.textContent = '';
      // 완료 전에는 결과 박스 숨김
      resEl.classList.add('hidden');
    }

    function computeType(){
      if (answers.size < QUESTIONS.length) return null;
      const tally = { E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0 };
      for (const [,letter] of answers) tally[letter]++;

      const pick = (a,b,axisKey) => (tally[a]===tally[b] ? TIE_BREAK[axisKey] : (tally[a]>tally[b]?a:b));
      return `${pick('E','I','EI')}${pick('S','N','SN')}${pick('T','F','TF')}${pick('J','P','JP')}`;
    }

    function kdUrl(type){ return KD_BASE + type; } // 결과 페이지가 대문자 쿼리 사용

    function showResult(type){
      typeTextEl.textContent = type;
      goLinkEl.href = kdUrl(type);
      goLinkEl.target = OPEN_IN_NEW_TAB ? '_blank' : '_self';
      resEl.classList.remove('hidden');
    }

    document.getElementById('submitBtn').addEventListener('click', () => {
      const type = computeType();
      if (!type) {
        const first = firstUnanswered();
        msgEl.textContent = '모든 문항에 응답해 주세요.';
        if (first){
          const firstInput = formEl.querySelector(`input[name="${first.id}"]`);
          firstInput?.focus();
          firstInput?.closest('fieldset')?.setAttribute('aria-invalid','true');
          firstInput?.closest('fieldset')?.scrollIntoView({behavior:'smooth', block:'center'});
        }
        return;
      }
      showResult(type);
      if (AUTO_REDIRECT) window.location.href = kdUrl(type);
      resEl.scrollIntoView({ behavior:'smooth', block:'center' });
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
      formEl.reset();
      answers.clear();
      for (const fs of formEl.querySelectorAll('fieldset')) fs.removeAttribute('aria-invalid');
      updateProgress();
      msgEl.textContent = '';
      window.scrollTo({ top:0, behavior:'smooth' });
    });
  </script>
</body>
</html>
