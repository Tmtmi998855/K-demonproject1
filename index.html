<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>10문항 MBTI 간이검사 → K‑Demon 연결</title>
  <meta name="description" content="10문항으로 빠르게 MBTI 스타일 유형을 계산하고 K‑Demon 결과 페이지로 이동합니다." />
  <meta property="og:title" content="10문항 MBTI 간이검사" />
  <meta property="og:description" content="빠르게 유형을 계산하고 K‑Demon으로 이동하기" />
  <meta property="og:type" content="website" />
  <style>
    :root {
      --bg: #0b1020;           /* 다크 배경 */
      --panel: #121933;
      --accent: #6ee7ff;       /* 포인트 */
      --accent-2: #a78bfa;     /* 보조 포인트 */
      --text: #e8eefc;
      --muted: #a8b0c9;
      --danger: #ff6b6b;
      --ok: #22c55e;
      --radius: 16px;
    }
    html, body { height:100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Apple SD Gothic Neo, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1020 0%, #0e1430 100%);
      color: var(--text);
      line-height: 1.6;
    }
    .wrap {
      max-width: 880px;
      margin: 24px auto;
      padding: 20px;
    }
    .card {
      background: radial-gradient(1200px 600px at 100% -20%, rgba(167,139,250,.08), transparent 60%),
                  radial-gradient(1200px 600px at 0% 120%, rgba(110,231,255,.08), transparent 60%),
                  var(--panel);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      overflow: hidden;
    }
    header {
      padding: 28px 24px 16px 24px;
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    header h1 { margin: 0 0 8px 0; font-size: clamp(20px, 3vw, 28px); }
    header p { margin: 0; color: var(--muted); }

    .content { padding: 20px; }

    .progress {
      position: sticky;
      top: 0; z-index: 2;
      background: rgba(11,16,32,.75);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,.06);
      padding: 10px 20px;
      display: flex; align-items: center; gap: 12px;
    }
    .bar-wrap { flex: 1; background: rgba(255,255,255,.08); height: 10px; border-radius: 999px; overflow: hidden; }
    .bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .25s ease; }
    .bar-label { font-size: 14px; color: var(--muted); min-width: 70px; text-align: right; }

    form { display: grid; gap: 16px; }
    fieldset { border: 1px solid rgba(255,255,255,.08); border-radius: 14px; padding: 14px; }
    legend { padding: 0 8px; color: var(--accent); font-weight: 700; }

    .q { display: grid; gap: 10px; }
    .opt {
      display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px;
      padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
    }
    .opt input[type="radio"] { width: 18px; height: 18px; accent-color: var(--accent); }

    .btns { display: flex; gap: 10px; justify-content: space-between; align-items: center; margin-top: 6px; }
    .left { display: flex; gap: 10px; }
    button, .btn {
      border: none; cursor: pointer; font-weight: 700; letter-spacing: .2px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #0b1020; padding: 12px 16px; border-radius: 12px;
      box-shadow: 0 6px 18px rgba(110,231,255,.2);
    }
    .btn.secondary { background: rgba(255,255,255,.1); color: var(--text); box-shadow: none; }
    .muted { color: var(--muted); font-size: 14px; }
    .error { color: var(--danger); font-weight: 700; }

    .result { display: none; margin-top: 8px; padding: 16px; border: 1px dashed rgba(255,255,255,.2); border-radius: 12px; }
    .type { font-size: 28px; font-weight: 900; letter-spacing: 2px; }

    footer { padding: 14px 20px 22px; color: var(--muted); font-size: 13px; border-top: 1px solid rgba(255,255,255,.06); }
    a { color: var(--accent); text-decoration: none; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="MBTI 간이검사">
      <header>
        <h1>10문항 MBTI 간이검사 → K‑Demon 바로가기</h1>
        <p>※ 오락·콘텐츠용 간이 테스트입니다. 공식 심리검사가 아닙니다. 개인정보는 수집하지 않습니다.</p>
      </header>

      <div class="progress" aria-live="polite">
        <div class="bar-wrap" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <div class="bar-label" id="barLabel">0 / 10</div>
      </div>

      <div class="content">
        <form id="quiz" novalidate>
          <!-- 질문은 JS로 주입됩니다 -->
        </form>

        <div class="btns">
          <div class="left">
            <button id="submitBtn" type="button" aria-label="결과 보기">결과 보기</button>
            <button id="resetBtn" type="button" class="btn secondary" aria-label="다시 하기">다시 하기</button>
          </div>
          <span class="muted">10문항 모두 응답하면 자동으로 K‑Demon 결과 페이지로 이동할 수 있습니다.</span>
        </div>

        <div id="msg" class="error" role="status" aria-live="polite" style="margin-top:10px"></div>

        <div id="result" class="result" aria-live="polite">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
            <div>
              <div class="muted">당신의 유형</div>
              <div class="type" id="typeText">—</div>
            </div>
            <a id="goLink" class="btn" href="#" rel="noopener" target="_blank">K‑Demon에서 결과 보기</a>
          </div>
        </div>
      </div>

      <footer>
        © <span id="year"></span> MBTI Quick Test (Fan‑made). · 이 페이지는 단일 HTML 파일로 제작되어 GitHub Pages에서 호스팅할 수 있습니다.
      </footer>
    </div>
  </div>

  <script>
    // =============== 설정 ===============
    // K‑Demon 결과 URL 패턴. 필요에 맞게 수정하세요.
    // 예) https://k-demon.kr/result/xxxx  혹은  https://k-demon.kr/xxxx
    const KD_BASE = "https://k-demon.kr/result/"; // 끝에 슬래시 유지
    const OPEN_IN_NEW_TAB = true;  // true면 새 탭으로 열기
    const AUTO_REDIRECT = false;   // true로 바꾸면 결과 계산 즉시 이동(테스트 끝→자동 이동)

    // 정답 동률일 때의 기본 선택(논란 줄이기용 임의 규칙)
    const TIE_BREAK = { EI: 'I', SN: 'N', TF: 'F', JP: 'P' };

    // 10문항(각 문항은 4축 중 하나에 점수 반영)
    const QUESTIONS = [
      { id: 'q1', axis: 'EI', a: { label: '사람 많은 자리에서 에너지가 충전된다', letter: 'E' }, b: { label: '혼자 있을 때 에너지가 회복된다', letter: 'I' } },
      { id: 'q2', axis: 'SN', a: { label: '사실과 디테일이 먼저 보인다', letter: 'S' }, b: { label: '가능성과 아이디어가 먼저 떠오른다', letter: 'N' } },
      { id: 'q3', axis: 'TF', a: { label: '결정은 논리와 원칙이 우선', letter: 'T' }, b: { label: '결정은 사람과 영향이 우선', letter: 'F' } },
      { id: 'q4', axis: 'JP', a: { label: '계획표가 있어야 편하다', letter: 'J' }, b: { label: '상황에 맞춰 유연하게 움직인다', letter: 'P' } },
      { id: 'q5', axis: 'EI', a: { label: '새로운 사람과 쉽게 대화 시작', letter: 'E' }, b: { label: '익숙한 사람과 깊게 대화', letter: 'I' } },
      { id: 'q6', axis: 'SN', a: { label: '검증된 방법을 선호', letter: 'S' }, b: { label: '새 시도를 즐김', letter: 'N' } },
      { id: 'q7', axis: 'TF', a: { label: '피드백은 직설적일수록 좋다', letter: 'T' }, b: { label: '피드백은 배려가 중요하다', letter: 'F' } },
      { id: 'q8', axis: 'JP', a: { label: '마감 전 미리 끝내는 편', letter: 'J' }, b: { label: '마감 직전에 집중이 잘 됨', letter: 'P' } },
      { id: 'q9', axis: 'SN', a: { label: '현재 일에 몰두하는 편', letter: 'S' }, b: { label: '미래의 그림을 자주 그린다', letter: 'N' } },
      { id: 'q10', axis: 'EI', a: { label: '말하며 생각이 정리된다', letter: 'E' }, b: { label: '글/머릿속에서 정리 후 말한다', letter: 'I' } },
    ];

    // =============== DOM 빌드 ===============
    const formEl = document.getElementById('quiz');
    const barEl = document.getElementById('bar');
    const barLabelEl = document.getElementById('barLabel');
    const msgEl = document.getElementById('msg');
    const resEl = document.getElementById('result');
    const typeTextEl = document.getElementById('typeText');
    const goLinkEl = document.getElementById('goLink');

    document.getElementById('year').textContent = new Date().getFullYear();

    function buildQuestions() {
      QUESTIONS.forEach((q, idx) => {
        const fs = document.createElement('fieldset');
        const lg = document.createElement('legend');
        lg.textContent = `Q${idx + 1}`;
        fs.appendChild(lg);

        const wrap = document.createElement('div');
        wrap.className = 'q';

        // A 옵션
        wrap.appendChild(buildOption(q, 'a'));
        // B 옵션
        wrap.appendChild(buildOption(q, 'b'));

        fs.appendChild(wrap);
        formEl.appendChild(fs);
      });
    }

    function buildOption(q, key) {
      const data = q[key];
      const id = `${q.id}-${key}`;
      const label = document.createElement('label');
      label.className = 'opt';
      label.setAttribute('for', id);

      const span = document.createElement('span');
      span.textContent = data.label;

      const input = document.createElement('input');
      input.type = 'radio';
      input.name = q.id;
      input.value = data.letter; // E/I/S/N/T/F/J/P
      input.id = id;
      input.required = true;
      input.addEventListener('change', updateProgress);

      label.appendChild(span);
      label.appendChild(input);
      return label;
    }

    buildQuestions();
    updateProgress();

    function answeredCount() {
      return QUESTIONS.filter(q => formEl.querySelector(`input[name="${q.id}"]:checked`)).length;
    }

    function updateProgress() {
      const cnt = answeredCount();
      const pct = Math.round((cnt / QUESTIONS.length) * 100);
      barEl.style.width = pct + '%';
      barLabelEl.textContent = `${cnt} / ${QUESTIONS.length}`;
      msgEl.textContent = '';
    }

    function computeType() {
      const tally = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
      for (const q of QUESTIONS) {
        const checked = formEl.querySelector(`input[name="${q.id}"]:checked`);
        if (!checked) return null; // 아직 미완료
        tally[checked.value]++;
      }
      // 축별 비교
      const pick = (a, b, axisKey) => (tally[a] === tally[b] ? TIE_BREAK[axisKey] : (tally[a] > tally[b] ? a : b));
      const eior = pick('E','I','EI');
      const snor = pick('S','N','SN');
      const tfor = pick('T','F','TF');
      const jpor = pick('J','P','JP');
      return `${eior}${snor}${tfor}${jpor}`;
    }

    function kdUrl(type) {
      return KD_BASE + type.toLowerCase();
    }

    function showResult(type) {
      typeTextEl.textContent = type;
      goLinkEl.href = kdUrl(type);
      goLinkEl.target = OPEN_IN_NEW_TAB ? '_blank' : '_self';
      resEl.style.display = 'block';
    }

    // 이벤트: 결과 보기
    document.getElementById('submitBtn').addEventListener('click', () => {
      const type = computeType();
      if (!type) {
        msgEl.textContent = '모든 문항에 응답해 주세요.';
        return;
      }
      showResult(type);
      if (AUTO_REDIRECT) {
        // 즉시 이동(원하면 지연 시간 추가 가능)
        window.location.href = kdUrl(type);
      }
      // 스크롤 이동(결과 노출 보장)
      resEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
    });

    // 이벤트: 다시 하기
    document.getElementById('resetBtn').addEventListener('click', () => {
      formEl.reset();
      updateProgress();
      resEl.style.display = 'none';
      msgEl.textContent = '';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
